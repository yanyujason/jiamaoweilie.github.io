
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="之前在学习CSS VOCABULARY的时候看到过有关伪元素的知识，知道它可以方便开发，但是具体用途和用法并没有真正掌握。最近有机会再次接触，对其用途有了一些新认识。 完美的画个衬线 在写页面的时候经常会遇到下图所示的情况，需要在一个标题或一段文字的下方显示一条定长的衬线。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jiamaoweilie.github.io/posts/2">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jiamaoweilie.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/26/before-and-after/">伪元素的使用</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-26T21:29:58+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:29 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>之前在学习CSS VOCABULARY的时候看到过有关伪元素的知识，知道它可以方便开发，但是具体用途和用法并没有真正掌握。最近有机会再次接触，对其用途有了一些新认识。</p>

<h2>完美的画个衬线</h2>

<p>在写页面的时候经常会遇到下图所示的情况，需要在一个标题或一段文字的下方显示一条定长的衬线。</p>

<p><img src="/images/img_for_before_after/how-it-works.png" alt="" /></p>

<p>我们可以通过给该元素的下面加另一个元素，然后设置一些样式来实现这种效果。但是如果使用伪元素就可以在不添加任何额外元素的情况下方便的画出这条衬线。</p>

<p>假设，有这样一个标题需要设置上图所示的样式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">h2</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="o">&gt;</span><span class="nt">HOW</span> <span class="nt">IT</span> <span class="nt">WORKS</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>  
</span></code></pre></td></tr></table></div></figure>


<p>我们来看看如何使用伪元素来为该标题设置样式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">h2</span><span class="p">{</span>
</span><span class='line'>    <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'>    <span class="k">color</span><span class="o">:</span> <span class="err">$</span><span class="nb">gray</span><span class="o">-</span><span class="nb">black</span><span class="o">-</span><span class="k">color</span><span class="p">;</span>
</span><span class='line'>    <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">&amp;::</span><span class="n">after</span> <span class="err">{</span>
</span><span class='line'>    <span class="k">content</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>    <span class="k">top</span><span class="o">:</span> <span class="m">35px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">left</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">50px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">height</span><span class="o">:</span> <span class="m">3px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">39</span><span class="o">,</span> <span class="m">39</span><span class="o">,</span> <span class="m">43</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">1</span><span class="p">);</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">-23px</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以看到，我们将元素本身的<code>position</code>设为<code>relative</code>，然后将其伪元素after的<code>positon</code>设为<code>absolute</code>，这样after的位置就相对于其父元素是绝对位置，我们可以通过设置它的<code>top</code>，<code>left</code>，或者<code>right</code>属性来调整它的位置。上面代码中设定该元素的<code>width</code>为<code>50px</code>,<code>height</code>为<code>30px</code>，并设置了<code>background-color</code>，这样它的样子就是一条长<code>50px</code>，高<code>3px</code>的线。我们再让其<code>left</code>等于<code>50%</code>，<code>top</code>等于<code>35px</code>，它就会位于其父元素上边框下方35px处，并居中。至此，我们就实现了上图所示的衬线效果。</p>

<h2>让这些圈圈优雅的连起来</h2>

<p>下面这张图也是页面上的一个常见情况，一些元素从中间被一条线连起来，像糖葫芦一样这条线在图片的中间。</p>

<p><img src="/images/img_for_before_after/numbers.png" alt="" /></p>

<p>同样，我们可以使用伪元素实现这条线。假设有下面一段代码需要实现上图的样式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">h2</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;number first&quot;</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nt">i</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;fa fa-list-alt fa-7x&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">i</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nt">h2</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;descSummary&quot;</span><span class="o">&gt;</span><span class="nt">Compare</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="nt">Magni</span> <span class="nt">dolores</span> <span class="nt">eoos</span> <span class="nt">qui</span> <span class="nt">retione</span> <span class="nt">voluptatem</span> <span class="nt">sequi</span> <span class="nt">nesciunt</span> <span class="nt">neque</span> <span class="nt">porro</span> <span class="nt">quisquam</span> <span class="nt">est</span><span class="o">&lt;/</span><span class="nt">p</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nt">h2</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="o">&gt;</span><span class="nt">2</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nt">i</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;fa fa-pencil fa-7x&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">i</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nt">h2</span><span class="o">&gt;</span><span class="nt">Receive</span> <span class="nt">Proposals</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="nt">Magni</span> <span class="nt">dolores</span> <span class="nt">eoos</span> <span class="nt">qui</span> <span class="nt">retione</span> <span class="nt">voluptatem</span> <span class="nt">sequi</span> <span class="nt">nesciunt</span> <span class="nt">neque</span> <span class="nt">porro</span> <span class="nt">quisquam</span> <span class="nt">est</span><span class="o">&lt;/</span><span class="nt">p</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">h2</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="o">&gt;</span><span class="nt">3</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nt">i</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;fa fa-users fa-7x&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">i</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nt">h2</span><span class="o">&gt;</span><span class="nt">Sell</span> <span class="nt">with</span> <span class="nt">the</span> <span class="nt">Best</span><span class="o">&lt;/</span><span class="nt">h2</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="nt">Magni</span> <span class="nt">dolores</span> <span class="nt">eoos</span> <span class="nt">qui</span> <span class="nt">retione</span> <span class="nt">voluptatem</span> <span class="nt">sequi</span> <span class="nt">nesciunt</span> <span class="nt">neque</span> <span class="nt">porro</span> <span class="nt">quisquam</span> <span class="nt">est</span><span class="o">&lt;/</span><span class="nt">p</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>我们只关注于数字和其衬线部分的样式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">33.33%</span><span class="p">;</span>
</span><span class='line'>  <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>  <span class="o">.</span><span class="n">number</span> <span class="err">{</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="m">2px</span> <span class="err">$</span><span class="k">border-color</span> <span class="k">solid</span><span class="p">;</span>
</span><span class='line'>    <span class="k">height</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
</span><span class='line'>    <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'>    <span class="k">line-height</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">color</span><span class="o">:</span> <span class="err">$</span><span class="nb">gray</span><span class="o">-</span><span class="k">color</span><span class="p">;</span>
</span><span class='line'>    <span class="k">background-color</span><span class="o">:</span> <span class="err">$</span><span class="k">background-color</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nc">.number</span><span class="o">:</span><span class="nd">:before</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>    <span class="k">top</span><span class="o">:</span> <span class="m">30px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">right</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">height</span><span class="o">:</span> <span class="m">2px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">background</span><span class="o">:</span> <span class="err">$</span><span class="k">border-color</span><span class="p">;</span>
</span><span class='line'>    <span class="k">z-index</span><span class="o">:</span> <span class="m">-1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nc">.first</span><span class="o">:</span><span class="nd">:before</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以看到，每个<code>li</code>向左浮动，并且宽度为33.33%，这样这三个数字就可以平均分布在页面中的一行。然后为数字元素设置了宽和高都是<code>60px</code>，并让其<code>border-radius</code>为50%，设置边框之后，三个圆圈就实现了。我们设置数字元素的<code>position</code>为<code>relative</code>，其伪元素before的<code>position</code>为<code>absolute</code>，然后设置其<code>top</code>为圆圈半径，<code>right</code>为<code>50%</code>，<code>width</code>为<code>100%</code>，这样我们就成功的在这些圈圈中间画了一条线。但是这样下来，你会发现第一个元素不需要有这条线，而且线有可能跑到圈圈里面。别着急，我们可以让第一个数字的伪元素不显示，并给圆圈设置一个背景色来覆盖其里面多余的线。</p>

<h2>立体的阴影也没有多麻烦</h2>

<p>看到下面这几个图标，很多人想必跟我一样一头雾水，不知其然也不知其所以然。后来经过研究，虽不知其完美的实现方法，但是发现使用伪元素可以实现如图效果。</p>

<p><img src="/images/img_for_before_after/cycle.png" alt="" /></p>

<p>先来看看我的html代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;like&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;icon-heart&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;trash&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;icon-trash&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;continue&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;icon-play&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>   
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;sync&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;icon-arrow-sync&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;fast-forward&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;icon-media-fast-forward&quot;</span><span class="o">&gt;&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>假设这些<code>icon</code>是我的音乐播放器里面的link，我需要让它们变成上图所示的样子。这里的icon采取<a href="https://icomoon.io/">icomoon</a>里面的字体。</p>

<p>其样式代码如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">ul</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">li</span> <span class="err">{</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">10%</span><span class="p">;</span>
</span><span class='line'>    <span class="n">a</span> <span class="err">{</span>
</span><span class='line'>      <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>      <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>      <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'>      <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
</span><span class='line'>      <span class="k">line-height</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>      <span class="k">font-size</span><span class="o">:</span> <span class="m">4em</span><span class="p">;</span>
</span><span class='line'>      <span class="k">width</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>      <span class="k">height</span><span class="o">:</span> <span class="m">60px</span><span class="p">;</span>
</span><span class='line'>      <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>      <span class="k">color</span><span class="o">:</span> <span class="err">$</span> <span class="k">font</span><span class="o">-</span><span class="nb">gray</span><span class="o">-</span><span class="k">color</span><span class="p">;</span>
</span><span class='line'>      <span class="k">background-color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
</span><span class='line'>      <span class="o">@</span><span class="n">include</span> <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">(</span><span class="n">rgba</span><span class="p">(</span><span class="nb">black</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="p">)</span><span class="m">0</span> <span class="m">0</span> <span class="m">20</span> <span class="k">px</span><span class="p">);</span>
</span><span class='line'>      <span class="o">&amp;::</span><span class="n">after</span> <span class="err">{</span>
</span><span class='line'>        <span class="k">z-index</span><span class="o">:</span> <span class="m">-100</span><span class="p">;</span>
</span><span class='line'>        <span class="k">content</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="m">80px</span><span class="p">;</span>
</span><span class='line'>        <span class="k">height</span><span class="o">:</span> <span class="m">80px</span><span class="p">;</span>
</span><span class='line'>        <span class="k">right</span><span class="o">:</span> <span class="m">-10px</span><span class="p">;</span>
</span><span class='line'>        <span class="k">top</span><span class="o">:</span> <span class="m">-10px</span><span class="p">;</span>
</span><span class='line'>        <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>        <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="err">$</span> <span class="k">font</span><span class="o">-</span><span class="nb">gray</span><span class="o">-</span><span class="k">color</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="err">}</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>通过代码可以看到，我们给<code>a</code>元素设置了一定的宽、高、边框、阴影，并通过<code>after</code>在其下面画一个比它本身的直径大<code>20px</code>的圆，这样二者重叠起来就是一个完美的有阴影的图标。</p>

<p>当然，伪元素的用法远不止这些，我们以后再慢慢研究吧。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/26/gulp/">使用Gulp简化开发</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-26T20:15:02+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://gulpjs.com/">Gulp</a>是一个轻量级的前端构建工具，它用来自动执行项目开发过程中遇到的许多耗时又无聊（但是非常重要）的任务，这些任务包括运行测试、拼接文件、精简文件以及CSS预处理。通过简单的创建一个任务文件，可以指示Gulp来自动运行一些开发中的任务，节省时间可以使你专注于开发本身。</p>

<h2>安装Gulp</h2>

<p>Gulp是基于Node.js的构建工具，安装Gulp之前必须安装<a href="http://nodejs.org/">Node.js</a>。在Mac中安装Node.js的方法非常简单。</p>

<p>如果使用homebrew，可以直接通过以下命令安装：</p>

<pre><code>$ brew install node
</code></pre>

<p>如果没有则可以下载安装包，并按照说明安装。</p>

<p>为了确保Node.js已经正确安装，可以执行几个简单的命令。</p>

<pre><code>$ node -v
</code></pre>

<p>如果安装正确，可以看到Node.js的版本号。</p>

<pre><code>v0.10.29
</code></pre>

<p>再来验证下npm：</p>

<pre><code>$ npm -v
</code></pre>

<p>同样，如果安装正确，可以看到npm的版本号：</p>

<pre><code>1.4.16
</code></pre>

<p>Node.js安装成功之后，可以使用npm来方便的安装Gulp：</p>

<pre><code>$ sudo npm install -g gulp 
</code></pre>

<p>其中，<code>npm</code>是安装node包的工具；<code>-g</code>表示在全局环境安装，以方便其他项目使用。安装成功后同样可以使用<code>gulp -v</code>命令查看Gulp的版本号，确保已经被成功安装。</p>

<p>接下来我们需要在本地项目中安装Gulp：</p>

<pre><code>$ npm install —-save-dev gulp
</code></pre>

<p>其中，<code>--save-dev</code>用来更新package.json文件，更新<code>devDependencies</code>值，以表明项目需要依赖Gulp。<code>Dependencies</code>可以向其他参与项目的人指明项目在开发环境和产品环境中的node模块依懒关系.更多关于此的问题，可以参见<a href="https://www.npmjs.org/doc/files/package.json.html#dependencies">package.json文档</a>。</p>

<h2>使用Gulp</h2>

<p>安装成功之后，我们来看看如何使用Gulp。</p>

<p>Gulp运行时，会在当前目录中查找gulpfile.js文件，并执行该文件中的内容。因此，使用Gulp的第一步是创建一个名为gulpfile.js的文件，然后再里面定义我们需要Gulp执行的任务。例如，我们先来定义一个Gulp的默认任务：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>gulp.task()</code>函数通常用来定义任务，例如上面代码中定义了一个default任务，该任务用来打印一个字符串。定义好该文件之后，可以通过在命令行中输入<code>gulp</code>命令来执行default任务，命令行中会输出如下结果：</p>

<pre><code>[22:21:06] Using gulpfile ~/WorkShops/homework/gulp/gulpfile.js
[22:21:06] Starting 'default'...
Hello world!
[22:21:06] Finished 'default' after 103 μs
</code></pre>

<p>知道Gulp的运行机制后，我们来看看如何使用Gulp帮助我们简化开发工作。例如，我们不想在产品环境中向用户暴露未压缩的源码，就可以使用Gulp来合并并且压缩所有.js文件为一个大文件。</p>

<p>首先，我们需要安装相应的插件:</p>

<pre><code>$ npm install -–save-dev gulp-concat gulp-ugligfy gulp-rename
</code></pre>

<p>其中<code>gulp-concat</code>插件用来合并文件，<code>gulp-ugligfy</code>插件用来压缩文件，<code>gulp-rename</code>用来重命名文件。安装成功之后，需要更新gulpfile.js文件:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">concat</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-concat&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">uglify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-uglify&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">rename</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-rename&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;scripts&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./js/*.js&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="s1">&#39;all.js&#39;</span><span class="p">))</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./dist&#39;</span><span class="p">))</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">rename</span><span class="p">(</span><span class="s1">&#39;all.min.js&#39;</span><span class="p">))</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">uglify</span><span class="p">())</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./dist&#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>定义好task之后，可以使用<code>gulp scripts</code>命令来执行该task。</p>

<p>通过代码可以看出，该任务首先会找到js目录下的所有.js文件，将其合并为一个名为all.js文件，然后将其放置来dist目录下，并重命名为all.min.js，最后将这个文件压缩,并保存在dist目录下的all.min.js文件中。在该task下定义的子任务通过pipe连接起来，当数据从管道的前一个节点流出之后，会流入下一个节点，而且数据在此过程中并不会写入中间文件，也就是说中间文件all.js最后并不会存在。</p>

<p>可以通过以下流程描述Gulp中task的执行方式:</p>

<pre><code>读文件 ==&gt; 子任务1 ==&gt; 子任务2 ==&gt; 子任务3 ===》··· ==&gt; 子任务N ==&gt; 写文件
</code></pre>

<p>与Grunt（使用文件，对文件执行单个任务然后保存到新的文件中，每个任务都会重复执行所有进程，文件系统频繁的处理任务会导致Grunt的运行速度比Gulp慢。）相比，Gulp的主要优势在于数据流操作，通过这种方式可以减小文件的读写工作，提高效率。更多关于数据流的知识，可以参见<a href="https://github.com/substack/stream-handbook">Stream Handbook</a>。Gulp的另一个优势是符合程序员的阅读习惯，通过代码，我们可以很轻松的看到该任务执行的主要内容。</p>

<p>如果我们需要Gulp帮我们来检查Javascript文件的格式，也可以定义一个类似的task。 首先需要安装用于检查格式的插件<code>gulp-jshint</code>：</p>

<pre><code>$ npm install gulp-jshint 
</code></pre>

<p>然后定义一个名为<code>lint</code>的task：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">jslint</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-jslint&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;lint&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">gulp</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">src</span><span class="p">([</span>
</span><span class='line'>            <span class="s1">&#39;./app/scripts/controllers/**/*.js&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;./app/scripts/services/**/*.js&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;./app/scripts/main.js&#39;</span>
</span><span class='line'>        <span class="p">])</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">jshint</span><span class="p">(</span><span class="s1">&#39;.jshintrc&#39;</span><span class="p">))</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">jshint</span><span class="p">.</span><span class="nx">reporter</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>通过代码可以看出，该task会检查多个目录下的.js文件，并且执行检查其格式，然后使用reporter生成报告。</p>

<p>.jshintrc文件是一个定义jslint检查规则的文件，文件内容通常如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;node&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;browser&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;esnext&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;bitwise&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;camelcase&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;curly&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;eqeqeq&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;immed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;indent&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;latedef&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;newcap&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;noarg&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;quotmark&quot;</span><span class="o">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;regexp&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;undef&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;unused&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;strict&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;trailing&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;smarttabs&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;predef&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="s2">&quot;describe&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;expect&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;it&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;beforeEach&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;inject&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;jasmine&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;jQuery&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;spyOn&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;afterEach&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>定义好task之后，执行命令<code>gulp lint</code>就可以看到检查结果：</p>

<p><img src="/images/img_for_gulp/error-right.png" alt="" /></p>

<p>从图中可以看到jslint帮我们找到了很多代码中的格式错误，等修复了这些错误之后，重新执行<code>gulp lint</code>命令，就不会报错了：</p>

<p><img src="/images/img_for_gulp/noerror.png" alt="" /></p>

<p>如果我们需要在一个task中执行多个之前定义的task，则可以像下面这样做：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;lint&#39;</span><span class="p">,</span> <span class="s1">&#39;scripts&#39;</span><span class="p">,</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="s1">&#39;views&#39;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以看到，在build命令中，我们执行了多个task，例如test，lint，scripts等。</p>

<p>类似的，Gulp还可以帮我们做很多事情，它有超过600种插件可以供开发者选择。你可以在<a href="http://gulpjs.com/plugins/">插件页面</a>或者npm上搜索gulpplugin来浏览插件列表，然后定义更多的task来简化我们的开发工作。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/09/guava-optional/">Guava Optional</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-09T21:30:16+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:30 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>兜兜转转，又开始拾起这篇曾经放弃了几百次的文章。时隔一个多月，依然清晰的记得第一次写完那个例子时，被某大师问了几个问题后尴尬地想撞墙的心情。查阅了一些乱七八糟的资料，试图找到一些能够帮我理解的例子，但未果，我糊涂的大脑还是无法理解这个奇葩的存在。直到某天，得到点化，似乎有了一些理解（很多疑问还在），希望写完不要被杀。</p>

<p>先说一说为什么要用<a href="https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained">Guava Optional</a>吧. Google的官方文档中说，它是用来避免使用null的，而且Google的code base中大约95%的collection中不该含有null值。看到这里，我不禁郁闷，null到底是一个什么样令人深恶痛绝的东西，令他们欲除之而后快。</p>

<p>看看他们是怎么解释的吧。文档中说，null之所以令人讨厌，最主要的原因是其<strong>含义模糊</strong>。比如，当Map.get(key)返回null时，可能是因为Map中的值为null，也有可能是Map中没有对应的值。null可以表示失败，可以表示成功，可以表示任何事情，所以如果要想表达的意思比较清晰，就要避免使用null。这样看着似乎是很有道理，那就这么着吧，在使用Map的时候不要把null作为key传入。可是该用什么呢？<code>Optional.absent()</code>呗。</p>

<p>可是<code>Optional.absent()</code>到底是个什么呢？其实它就是Optional提供的一个表示不存在的符号。Optional是一种使用非空值代替可以为空的值的方式，它可能存在（isPresent为ture），也可能不存在。例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">possible</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</span><span class='line'><span class="n">possible</span><span class="o">.</span><span class="na">isPresent</span><span class="o">();</span> <span class="c1">// returns true</span>
</span><span class='line'><span class="n">possible</span><span class="o">.</span><span class="na">get</span><span class="o">();</span> <span class="c1">// returns 5</span>
</span></code></pre></td></tr></table></div></figure>


<p>除了上面说的方式外，什么时候使用Optional合适呢？ 看了一堆例子，大多像这样：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleGuavaOptionalExample</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Optional</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">fromNull</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">getList</span><span class="o">());</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">fromNull</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// do something</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getList</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>看完这个例子，估计我们的内心都不禁呐喊，这是个啥啊！！！！那我用其他方法，判断一下返回值是不是null不也一样（某大师也是这么问我的）。后来发现Optional这家伙主要用于<a href="http://en.wikipedia.org/wiki/Null_Object_pattern">空对象模式(Null Object pattern)</a>。那空对象模式又是什么时候用呢？资料上说它的用法主要有两种：</p>

<ol>
<li>一种是返回集合的时候。</li>
<li>策略模式(Strategy Pattern)或者状态模式(State Pattern)。</li>
</ol>


<p>第一种用法也许说的就是上面的那几行代码中显示的那样。那策略模式又是怎么用呢？从字面意思看，Optional的意思是可选择的，它就是用来表示一个可有可无的东西。例如命令行中的<code>ls</code>命令，它的格式是<code>ls [选项] [目录名]</code>，其中的后两项就是Optional，是可有可无的，如果有的话，会产生一些额外的作用。比如<code>ls -i</code>，会列出每个文件的inode号；<code>ls -l Documents</code>，会列出Documents目录下所有文件的详细信息；如果单纯的使用<code>ls</code>，则直接列出当前目录的的子目录和文件。</p>

<p>遗憾的是这个高大上的例子我没有真正实现，那么就用这个接地气的例子代替吧。</p>

<p><em>话说今日天朗气清，惠风和畅，某大师用自己的午饭推荐神器<a href="http://icodeit.org/2014/09/simple-idea-and-simple-script/">chisha</a>摇出今天中午要吃炒饭，于是来到餐厅愉快的点餐。</em></p>

<p>根据上述需求，我们设计出一个订单类：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span>  <span class="n">Food</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span>  <span class="n">OptionalRequirement</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">Order</span><span class="o">(</span><span class="n">Food</span> <span class="n">food</span><span class="o">,</span> <span class="n">OptionalRequirement</span> <span class="n">optionalRequirement</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">food</span> <span class="o">=</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">optionalRequirement</span> <span class="o">=</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Food</span> <span class="nf">getFood</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFood</span><span class="o">(</span><span class="n">Food</span> <span class="n">food</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">food</span> <span class="o">=</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">OptionalRequirement</span> <span class="nf">getOptionalRequirement</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOptionalRequirement</span><span class="o">(</span><span class="n">OptionalRequirement</span> <span class="n">optionalRequirement</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">optionalRequirement</span> <span class="o">=</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>在设计订单类时，我们加入了一个OptionalRequirement属性，以满足顾客的一些额外需求。如果大师想给炒饭里面额外加个鸡蛋，那就下单：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Food</span> <span class="n">friedRice</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Food</span><span class="o">(</span><span class="s">&quot;friedRice&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">OptionalRequirement</span> <span class="n">moreEgg</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ExtraEgg</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Order</span><span class="o">(</span><span class="n">friedRice</span><span class="o">,</span> <span class="n">moreEgg</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>如果想多吃点肉，那也很随意：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Food</span> <span class="n">friedRice</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Food</span><span class="o">(</span><span class="s">&quot;friedRice&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">OptionalRequirement</span> <span class="n">moreMeat</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ExtraMeat</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Order</span><span class="o">(</span><span class="n">friedRice</span><span class="o">,</span> <span class="n">moreMeat</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>可是天有不测风云，大师今天偏偏啥额外需求也没有，那么这个订单会长成这样：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Food</span> <span class="n">friedRice</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Food</span><span class="o">(</span><span class="s">&quot;friedRice&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Order</span><span class="o">(</span><span class="n">friedRice</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>显然，这null具有各自语义不明的缺点，而且可能会造成空指针异常。这时候Optional就可以优雅的出场了，订单类会被改成这样：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span>  <span class="n">Food</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span>  <span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptionalRequirement</span><span class="o">&gt;</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">Order</span><span class="o">(</span><span class="n">Food</span> <span class="n">food</span><span class="o">,</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptionalRequirement</span><span class="o">&gt;</span> <span class="n">optionalRequirement</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">food</span> <span class="o">=</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">optionalRequirement</span> <span class="o">=</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Food</span> <span class="nf">getFood</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptionalRequirement</span><span class="o">&gt;</span> <span class="nf">getRequirementOptional</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFood</span><span class="o">(</span><span class="n">Food</span> <span class="n">food</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">food</span> <span class="o">=</span> <span class="n">food</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setRequirementOptional</span><span class="o">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptionalRequirement</span><span class="o">&gt;</span> <span class="n">optionalRequirement</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">optionalRequirement</span> <span class="o">=</span> <span class="n">optionalRequirement</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这里的<code>OptionalRequirement</code>就像是命令行中那些可有可无的可选参数，如果有额外要求时，就这么使用如下方法点单：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Food</span> <span class="n">friedRice</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Food</span><span class="o">(</span><span class="s">&quot;friedRice&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">OptionalRequirement</span> <span class="n">moreEgg</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ExtraEgg</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Order</span><span class="o">(</span><span class="n">friedRice</span><span class="o">,</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">moreEgg</span><span class="o">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>如果没有其他要求时，就是下面的方式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Food</span> <span class="n">friedRice</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Food</span><span class="o">(</span><span class="s">&quot;friedRice&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Order</span><span class="o">(</span><span class="n">friedRice</span><span class="o">,</span> <span class="n">Optional</span><span class="o">.&lt;</span><span class="n">OptionalRequirement</span><span class="o">&gt;</span><span class="n">absent</span><span class="o">());</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Optional.&lt;OptionalRequirement&gt;absent()</code>用来表示额外的需求不存在，顾客就需要一碗常规的炒饭就好了。这样就避免了使用null语义不明确的问题。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/02/angularjs/">使用AngularJS与api集成</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-02T21:53:45+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>9:53 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果我们有一个api提供一些json格式的数据，那么如何使用AngularJS来获取这些数据，又如何将处理过的的数据显示在一个具有responsive特性的页面上？本文将一一描述。</p>

<p>在本文的例子中api提供如下格式的json数组：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[{"first_name": "Kelli", "last_name": "Guiney", "time": "01:00:58"},
</span><span class='line'>{"first_name": "Brett", "last_name": "Cooper", "time": "01:05:35"},
</span><span class='line'>{"first_name": "Felicity", "last_name": "White", "time": "01:07:15"},
</span><span class='line'>{"first_name": "Monty", "last_name": "Hamilton", "time": "01:08:05"},
</span><span class='line'>{"first_name": "Sarah", "last_name": "Battwraden", "time": "01:11:03"},
</span><span class='line'>{"first_name": "Bob", "last_name": "Reynolds", "time": "01:11:37"},
</span><span class='line'>{"first_name": "Mike", "last_name": "Baxter", "time": "01:14:14"},
</span><span class='line'>{"first_name": "Terry", "last_name": "Gillespie", "time": "01:14:15"},
</span><span class='line'>{"first_name": "Chris", "last_name": "Ford", "time": "01:22:27"},
</span><span class='line'>{"first_name": "Sunil", "last_name": "Samarasinghe", "time": "01:24:24"},
</span><span class='line'>{"first_name": "Dan", "last_name": "Martin", "time": "01:25:29"}]</span></code></pre></td></tr></table></div></figure>


<p>最终要求是将前十个元素以下图的样式显示的页面上：</p>

<p><img src="/images/img_for_angularjs_demo/showresult.png" alt="" width="70%"></p>

<p>并且这个页面具有<a href="http://en.wikipedia.org/wiki/Responsive_web_design">responsive</a>特性，即当使用其他屏幕尺寸不同的设备时，其样式会有相应的变化。在手机上显示的结果如下图所示：</p>

<p><img src="/images/img_for_angularjs_demo/phone.png" alt="" width="30%" /></p>

<h1>设计一个responsive的表格</h1>

<p><a href="http://getbootstrap.com/">Bootstrap</a>是Twitter推出的一个开源的用于前端开发的工具包。它是一个简洁、直观、强悍的前端开发框架，使用它可以很容易的设计出一个具有responsive特性的页面。在使用Bootstrap设计页面之前，需要在hmtl中引入它的<code>bootstrap.css</code>、<code>jquery.js</code>和<code>bootstrap.js</code>文件（Bootstrap是基于JQuery开发的，所以必须引入）：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>我们的例子使用Bootstrap来设计一个表格，以展示后台提供的json数组：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;table-responsive&quot;</span> <span class="na">ng-controller=</span><span class="s">&quot;LeaderBoardController&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;table table-box&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;thead&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;table-header &quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;th</span> <span class="na">width=</span><span class="s">&quot;50px&quot;</span> <span class="na">class=</span><span class="s">&quot;text-center&quot;</span><span class="nt">&gt;</span>RANK<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>            <span class="nt">&lt;th&gt;</span>NAME<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>            <span class="nt">&lt;th</span> <span class="na">width=</span><span class="s">&quot;120px&quot;</span> <span class="na">class=</span><span class="s">&quot;text-center text-nowrap&quot;</span><span class="nt">&gt;</span>TIME<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;color:#98ACE1&quot;</span><span class="nt">&gt;</span>(HH:MM:SS)<span class="nt">&lt;/span&gt;&lt;/th&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tbody</span> <span class="na">id=</span><span class="s">&quot;items&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tr</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items | limitTo:10 &quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;text-center&quot;</span><span class="nt">&gt;</span>{ {$index + 1} }<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;text-left text-ellipsis&quot;</span><span class="nt">&gt;</span>{ {item.first_name} } { {item.last_name} }<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;text-center text-nowrap&quot;</span> <span class="na">style=</span><span class="s">&quot;min-width:100px&quot;</span><span class="nt">&gt;</span>{ {item.time} }<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/table&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>从代码看来这个<code>table</code>似乎也没有什么神奇的地方，怎么就能自适应各种页面显示呢，答案其实就在<code>class="table-responsive"</code>。引入Bootstrap之后，可以通过使用它预设的一些class来实现我们想要的效果。比如本例中的<code>table-responsive</code>说明这个<code>div</code>里面的<code>table</code>具有responsive的特性。更多关于table的设置，请参见<a href="http://getbootstrap.com/css/#tables">官方文档</a>。</p>

<h1>显示api提供的数据</h1>

<p>读上面一段代码时，我们会发现里面有一些类似于<code>ng-controller="LeaderBoardController"</code>，<code>{ {$index + 1} }</code>的奇怪东西。它们就是AngularJS中的一些标示符，用来帮助我们和页面交互。<a href="https://angularjs.org/">AngularJS</a>诞生于Google,是一款优秀的前端JS框架，已经被用于Google的多款产品当中。它有着诸多特性，最为核心的是：MVC、模块化、自动化双向数据绑定、语义化标签、依赖注入，等等。使用AngularJS时必须首先引入<code>angular.js</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;angular.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>我们的例子中使用AngularJS作为前端框架，来和后端的api交互。上面<code>html</code>代码中的<code>ng-controller="LeaderBoardController"</code>定义了一个Controller，用以响应与api交互的事件。<code>ng-repeat="item in items | limitTo:10 "&gt;</code>表示repeat它所在的DOM并用元素<code>items</code>里面的值来填充DOM需要的值，并限制repeat次数为10。<code>{ {$index + 1} }</code>表示输出当前编号（<code>$index</code>是其索引值，从0开始），<code>{ {item.first_name} }</code>表示输出<code>item</code>的<code>fist_name</code>属性，其他与前面类似。</p>

<p>Controller的代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;LeaderBoardApp&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;LeaderBoardController&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;LeaderBoardService&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">LeaderBoardService</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">LeaderBoardService</span><span class="p">.</span><span class="nx">getLeaderBoardData</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
</span><span class='line'>            <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
</span><span class='line'>            <span class="p">});</span>
</span><span class='line'>    <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>代码首先定义了一个AngularJS的模块，模块名称为<code>LeaderBoardApp</code>，然后定义了一个名为<code>LeaderBoardController</code>的Controller。很容易看出，这个Controller的作用是调用<code>LeaderBoardService</code>的<code>getLeaderBoardData()</code>函数，并将获取的数据传给<code>$scope.items</code>。此处的<a href="https://docs.angularjs.org/guide/scope"><code>$scope</code></a>是AngularJS的内置服务,当服务被找到并加载之后，执行匿名函数将其传入。比如此处，当AngularJS解析页面时，会动态的创建一个scope, 并将它的属性items设为<code>getLeaderBoardData()</code>函数返回的值，这样页面就可以获取到Controller得到的数据。</p>

<p><code>LeaderBoardService</code>是AngularJS中的Service，用于与后台交互，它的定义与Controller相似：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;LeaderBoardApp&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;LeaderBoardService&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$q&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$q</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">getLeaderBoardData</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>                <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;http://test/api&quot;</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>                <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span class='line'>                <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>    <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>factory是AngularJS支持的Service定义的一种。从代码可以看出Service名字为<code>LeaderBoardService</code>，它依赖于<a href="https://docs.angularjs.org/api/ng/service/$http"><code>$http</code></a>服务和<a href="https://docs.angularjs.org/api/ng/service/$q"><code>$q</code></a>服务。<code>$http</code>服务用于向后台发送请求，并获取相应，例如例子中的代码向一个URL发送了一个get请求。$q可以用来创建以defer对象，defer有两个状态：resolve和reject。这里的$http不直接返回异步操作的结果，而是返回一个对defer对象的引用。这样就使用上例中<code>LeaderBoardController</code>里面的方法一样处理这个Service返回的结果了：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">LeaderBoardService</span><span class="p">.</span><span class="nx">getLeaderBoardData</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
</span><span class='line'>    <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>至此，我们已经可以从将后台api提供的数据显示在页面上了。如果此时我们有一个新的需求：因为后台的api提供的数据是变化的，所以我们需要每隔30秒刷新一次数据，即每隔30秒调用一次<code>LeaderBoardService.getLeaderBoardData()</code>。这时候就需要用到AngularJS的另一个服务<a href="https://docs.angularjs.org/api/ng/service/$interval"><code>$interval</code></a>。
代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;LeaderBoardApp&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;LeaderBoardController&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;LeaderBoardService&#39;</span><span class="p">,</span> <span class="s1">&#39;$interval&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">LeaderBoardService</span><span class="p">,</span> <span class="nx">$interval</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">refresh</span><span class="p">();</span>
</span><span class='line'>        <span class="nx">$interval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">refresh</span><span class="p">();</span>
</span><span class='line'>        <span class="p">},</span> <span class="mi">30000</span><span class="p">);</span>
</span><span class='line'>        <span class="kd">function</span> <span class="nx">refresh</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">LeaderBoardService</span><span class="p">.</span><span class="nx">getLeaderBoardData</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
</span><span class='line'>                <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
</span><span class='line'>                <span class="p">});</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>首先需要像使用<code>$scope</code>那样，将<code>$interval</code>作为参数传给Controller，然后设置间隔时间为30000毫秒，无限重复，这样就会每隔30秒执行一遍refresh函数，刷新一遍页面。自此我们的需求也就初步实现。</p>

<p>更多关于AngularJS的用法，请参见<a href="https://docs.angularjs.org/api">官方文档</a>。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/10/bulid-a-todo-list-example-with-spring-boot/">Bulid a Todo List Example With Spring Boot</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-10T17:00:16+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:00 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://projects.spring.io/spring-boot/">Spring Boot</a>利用JavaConfig的配置模式以及“约定优于配置”的理念，能够极大的简化基于Spring MVC的Web应用和REST服务开发。使用Spring Boot能够很容易的创建独立的Spring应用程序，它直接嵌入Tomcat或者Jetty，不需要部署WAR文件，不需要XML文件，能够简化配置，极大的方便用户来快速创建一个应用程序。下面我将介绍如何使用Spring Boot创建一个简单的RESTful API。这个例子是一个简单的todo list，可以实现对todo list的增删查改。例如：</p>

<h4>运行程序：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>spring-boot:run</span></code></pre></td></tr></table></div></figure>


<h4>增加一条todo：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -X "POST" -v localhost:8080/todos -H "Content-Type: application/json" -d '{"description":"This is a todo."}'</span></code></pre></td></tr></table></div></figure>


<h4>查询所有的todo：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -X "GET" -v localhost:8080/todos</span></code></pre></td></tr></table></div></figure>


<h4>删除一条todo：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -X "DELETE" -v localhost:8080/todos/1</span></code></pre></td></tr></table></div></figure>


<h4>修改一条todo：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -X "PUT" -v localhost:8080/todos/2 -H "Content-Type: application/json" -d '{"description":"Modified Todo"}'</span></code></pre></td></tr></table></div></figure>


<p>在这个例子中，我们使用Spring Date JPA处理数据，使用mysql存储数据：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[
</span><span class='line'>  {
</span><span class='line'>    "id": 1,
</span><span class='line'>    "description": "A Todo"
</span><span class='line'>  },
</span><span class='line'>  {
</span><span class='line'>    "id": 2,
</span><span class='line'>    "description": "Study Spring Boot. "
</span><span class='line'>  }
</span><span class='line'>]</span></code></pre></td></tr></table></div></figure>


<h2>创建文件结构</h2>

<p>可以使用<a href="http://start.spring.io/">Spring Initializr</a>来帮助你快速创建出本工程的文件结构和POM.xml文件，也可以手动创建。创建完成后，本例子的文件结构如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>└──src
</span><span class='line'>  └──main
</span><span class='line'>      └──java
</span><span class='line'>          └──todos
</span><span class='line'>          └──resources</span></code></pre></td></tr></table></div></figure>


<h2>pom.xml</h2>

<p>工程创建成功之后，需要添加pom.xml文件（如果使用Spring Initializr会自动生成pom.xml文件，只需要做一些修改即可），本例的pom.xml文件内容如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;parent&gt;</span>
</span><span class='line'>    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;version&gt;</span>1.1.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span class='line'><span class="nt">&lt;/parent&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;dependencies&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>5.1.6<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'><span class="nt">&lt;/dependencies&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;properties&gt;</span>
</span><span class='line'>    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
</span><span class='line'>    <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
</span><span class='line'>    <span class="nt">&lt;start-class&gt;</span>todos.Application<span class="nt">&lt;/start-class&gt;</span>
</span><span class='line'><span class="nt">&lt;/properties&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;build&gt;</span>
</span><span class='line'>    <span class="nt">&lt;plugins&gt;</span>
</span><span class='line'>        <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>            <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>            <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>            <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/plugins&gt;</span>
</span><span class='line'><span class="nt">&lt;/build&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;repositories&gt;</span>
</span><span class='line'>    <span class="nt">&lt;repository&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;name&gt;</span>Spring Releases<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>        <span class="nt">&lt;url&gt;</span>http://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/repository&gt;</span>
</span><span class='line'>    <span class="nt">&lt;repository&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id&gt;</span>org.jboss.repository.releases<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;name&gt;</span>JBoss Maven Release Repository<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>        <span class="nt">&lt;url&gt;</span>https://repository.jboss.org/nexus/content/repositories/releases<span class="nt">&lt;/url&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/repository&gt;</span>
</span><span class='line'><span class="nt">&lt;/repositories&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pluginRepositories&gt;</span>
</span><span class='line'>    <span class="nt">&lt;pluginRepository&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;name&gt;</span>Spring Releases<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>        <span class="nt">&lt;url&gt;</span>http://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/pluginRepository&gt;</span>
</span><span class='line'><span class="nt">&lt;/pluginRepositories&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>在上面的配置中，需要将工程的parent被设置为spring-boot-starter-parent，并添加对spring-boot-starter-web，spring-boot-starter-data-jpa，mysql-connector-java的依赖。spring-boot-starter-parent会继承一些默认的依赖，这样的设置之后就无需添加一堆相应的依赖，能够将依赖配置最小化；spring-boot-starter-web提供了对web的支持；spring-boot-starter-data-jpa提供了对数据的支持；mysql-connector-java提供了和后台mysql数据库连接的支持。在构建中要声明使用spring-boot-maven-plugin这个插件，它会对Maven打包形成的JAR进行二次修改，最终产生符合我们要求的内容结构，并且可以直接使用mvn spring-boot: run运行应用程序。</p>

<h2>实体</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Entity</span>
</span><span class='line'><span class="nd">@Table</span><span class="o">(</span><span class="n">uniqueConstraints</span> <span class="o">=</span> <span class="o">{</span> <span class="nd">@UniqueConstraint</span><span class="o">(</span><span class="n">columnNames</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;id&quot;</span> <span class="o">})</span> <span class="o">})</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Todo</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Id</span>
</span><span class='line'>    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">GenerationType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">description</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDescription</span><span class="o">(</span><span class="n">String</span> <span class="n">description</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">description</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用@Entity表明该实体为JPA实体，它包含id和description两个属性，其中id为自动生成，其结构对应于数据库中Todo表。创建完成后，我们就可以利用此实体方便的进行操作。</p>

<h2>Controller</h2>

<p>拥有Todo这个实体之后，我们需要一个Controller来响应实体的请求：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">web</span><span class="o">.</span><span class="na">bind</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">RequestMethod</span><span class="o">.*;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@RestController</span>
</span><span class='line'><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/todos&quot;</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoController</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Autowired</span>
</span><span class='line'>    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">GET</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">showTodoList</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAllList</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/{id}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">GET</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">showATodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;id&quot;</span><span class="o">)</span> <span class="n">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">POST</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Todo</span> <span class="n">newTodo</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoService</span><span class="o">.</span><span class="na">createNewTodo</span><span class="o">(</span><span class="n">newTodo</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/{id}&quot;</span> <span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="n">DELETE</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">)</span> <span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="n">todoService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/{id}&quot;</span> <span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">PUT</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">update</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Todo</span> <span class="n">updateTodo</span><span class="o">,</span> <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">)</span> <span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoService</span><span class="o">.</span><span class="na">updateTodo</span><span class="o">(</span><span class="n">updateTodo</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>其中@RestController是Spring 4中的annotation，它集合了@Controller和@ResponseBody的作用，能够标注一个类是Controller，并且是该类的方法返回一个domain对象。@RequestMapping用于确保该类中方法map到对应的路径。@PathVariable会将url中的参数解析到对应的方法参数上，使用它时需要在@RequestMapping()指定匹配模式 ，例如：<code>@RequestMapping(value = "/{id}" ,method = DELETE)</code>，当使用<code>/1</code>时，就可以把“1”解析到方法参数id上。</p>

<p>传统Spring MVC的Controller与RESTful Web服务器的Controller最大的区别在于建立HTTP响应的方式。这个例子中的Controller只使用Todo对象进行传入和返回参数，Todo对象以JSON的形式传输。</p>

<h2>Service</h2>

<p>有了Controller之后，我们需要一个Service来处理Controller与Repository之间的交互。代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Service</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoService</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;todoRepository&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="nd">@Autowired</span>
</span><span class='line'>    <span class="n">TodoRepository</span> <span class="n">todoRepository</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">findAllList</span><span class="o">(){</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">createNewTodo</span><span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="o">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">findById</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="n">todoRepository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">updateTodo</span><span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="o">,</span> <span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">!=</span> <span class="n">todo</span><span class="o">.</span><span class="na">getId</span><span class="o">())</span>
</span><span class='line'>            <span class="n">todoRepository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以看到，该Service中Autowired了TodoRepository，并利用其实现了对Todo的增删查改。</p>

<h2>Repository</h2>

<p>本例中使用Spring Data JPA进行数据存储，它关注在关系型数据库使用JPA存储数据，在运行时从一个repository接口中自动创建repository实例。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Component</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoRepository</span> <span class="kd">extends</span> <span class="n">CrudRepository</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>
本例子中的<code>TodoRepository</code>继承了<code>CrudRepository</code>接口，通过泛型指定了实体类型是Todo和Long。<code>CrudRepository</code>包括多个持久化方法，包括保存、删除、查找和更新Todo实体。<code>TodoRepository</code>继承了这些方法，并且可以在此基础上修改或者增加一些新的方法。</p>

<h2>配置文件</h2>

<p>Spring Boot不需要xml配置文件，只需要在resources目录下添加一个application.yml文件来进行相应的配置，例如使用：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nl">spring:</span>
</span><span class='line'>  <span class="nl">profiles:</span> <span class="n">development</span>
</span><span class='line'>
</span><span class='line'>  <span class="nl">datasource:</span>
</span><span class='line'>    <span class="nl">driverClassName:</span> <span class="n">com</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span>
</span><span class='line'>    <span class="nl">url:</span> <span class="nl">jdbc:mysql:</span><span class="c1">//localhost:3306/todos</span>
</span><span class='line'>    <span class="nl">username:</span> <span class="n">root</span>
</span><span class='line'>    <span class="nl">password:</span>
</span><span class='line'>
</span><span class='line'>  <span class="nl">jpa:</span>
</span><span class='line'>     <span class="n">show</span><span class="o">-</span><span class="nl">sql:</span> <span class="kc">true</span>
</span><span class='line'>     <span class="nl">hibernate:</span>
</span><span class='line'>       <span class="n">ddl</span><span class="o">-</span><span class="nl">auto:</span> <span class="n">update</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>设置本例中使用jpa和mysql.</p>

<h2>启动应用</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@EnableAutoConfiguration</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Application类的main方法中使用了SpringApplication帮助类，并以Application这个类作为配置来启动Spring的应用上下文。<code>@EnableAutoConfiguration</code>用于开启自动配置，使用它可以使我们刚刚设置的配置文件自动生效。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/03/css-vocabulary/">CSS VOCABULARY</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-03T13:34:16+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:34 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>CSS词汇是前端开发经常需要用到的东西，但是各种各样的CSS词汇经常令人眼花缭乱。本文主要总结一些CSS词汇的主要功能和用法。</p>

<h2><strong>@import</strong></h2>

<p>它是一种引入CSS的方式，可以在一个CSS文件中引入另一个CSS文件，使用方法如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="nt">my</span><span class="nc">.css</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2><strong>Media Queries</strong></h2>

<p>根据字面意思，“Media Queries”就是媒体查询。在CSS中，我们可以设置不同类型的媒体条件，并根据相应的条件，为符合条件的媒体调用与之对应的样式表。它主要用于响应式网页设计（Responsive web Design），该设计可使网站在多种浏览设备上完美显示。</p>

<p>Media Queries的简单用法如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">700px</span><span class="o">)</span><span class="p">{</span>
</span><span class='line'>  <span class="nf">#content</span><span class="p">{</span>
</span><span class='line'>      <span class="k">width</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上media语句表示，当屏幕的最大宽度小于700px时，#content的宽度就变为原来的50%。这个例子包含了几种概念：</p>

<ul>
<li>媒体类型（Media Type）</li>
</ul>


<p>通过媒体类型可以对不同的设备指定不同的样式，如上例中的screen。<a href="http://www.w3.org/TR/CSS2/media.html#media-types">常见的媒体类型</a>有数十种。</p>

<ul>
<li>媒体特性（Media Features）</li>
</ul>


<p>媒体特性就是媒体类型的特性，如上例中的mix-width，是指屏幕的最大宽度。<a href="http://www.w3.org/TR/css3-mediaqueries/#media1">常见的媒体特性</a>有十三种。</p>

<ul>
<li>关键词（Key Word）</li>
</ul>


<p>关键词有三种：and， not， only。</p>

<p>and用于定义“与”条件，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@media</span> <span class="nt">screen</span> <span class="o">(</span><span class="nt">min-width</span><span class="nd">:600px</span><span class="o">)</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:900px</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>是指屏幕的最小宽度大于600px并且最大宽度小于900px。</p>

<p>not用于排除某种特定的媒体类型，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@media</span> <span class="nt">not</span> <span class="nt">print</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">1200px</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>是指排除print这种媒体类型。</p>

<p>only用来指定某种特定的媒体类型，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-device-width</span><span class="nd">:240px</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>用来特指screen这种媒体类型。</p>

<h2><strong>CSS选择器</strong></h2>

<p>CSS选择器是CSS中最常用的东西，我们都不会感到陌生。但是它还有一些高端、神奇、不为常人所知的功能，下文将一一介绍。常用的CSS选择器有三种：</p>

<ul>
<li>简单选择器（Simple Selector）</li>
<li>属性选择器（Attribute Selector）</li>
<li>伪类选择器（Pseudo-class Selector）</li>
</ul>


<h3><strong>一. 简单选择器</strong></h3>

<p>简单选择器是CSS世界使用最为广泛的选择器，我将通过一个实例来总结它的用法。实例的代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;demo&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;first&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;active important&quot;</span><span class="o">&gt;</span><span class="nt">2</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;important items&quot;</span><span class="o">&gt;</span><span class="nt">3</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;important&quot;</span><span class="o">&gt;</span><span class="nt">4</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;items&quot;</span><span class="o">&gt;</span><span class="nt">5</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">6</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">7</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">8</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">9</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;last&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="o">&gt;</span><span class="nt">10</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>在添加一些样式之后，实例的初步现实如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-status.png" alt="" /></p>

<h4>1. 通配符选择器（Universal Selector）（*）</h4>

<p>通配符选择器用来选择所有元素，或者某个元素下的所有元素。例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">*</span><span class="p">{</span>
</span><span class='line'>  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示选择所有元素，并将其margin、padding都设置为0。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="o">*</span><span class="p">{</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="nb">blue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示选择了.demo下的所有所有元素。以上例子的效果图如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-tp.png" alt="" /></p>

<p>从图中可以看出，div.demo下所有元素的边框都加上了上面代码中定义的样式。</p>

<h4>2. 元素选择器（Element Selector）（E）</h4>

<p>元素就是html页面中的元素，例如本文中的div，ul，li等。元素选择器用来选择这些页面元素。例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span> <span class="n">grey</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">orange</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个例子选择html中的li元素，并将其背景色设为grey，前景色设为orange，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-e.png" alt="" /></p>

<h4>3. 类选择器（Class Selector）（.className）</h4>

<p>类选择器根据html文档中元素的类名来选择元素，也就是说元素必须有类名才能使用类选择器来选择。上文中的items，important等就是为相应元素添加的类，类选择器可以用来选择这些元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.important</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示选择类名为important的元素，并将其字体加粗、前景色设为yellow。值得注意的是，类选择器并不仅仅选择类名为important的元素，而是选择类名中包含important的元素，效果图如下：</p>

<p><img src="/images/img_for_css_vocabulary/class.png" alt="" /></p>

<h4>4. ID选择器（ID Selector）(#ID)</h4>

<p>与类选择器类似，ID选择器根据html文档中元素的id来选择元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nf">#first</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="m">#000</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nf">#last</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="m">#000</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>上例中，选择id为first的元素，将其背景色设为lime，前景色设为#000；选择id为last的元素，将其背景色设为#000，前景色设为lime，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css-select-id.png" alt="" /></p>

<h4>5. 后代选择器（Descendant Selector）(E F)</h4>

<p>后代选择器也叫包含选择器，它可以选择某元素的后代元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span> <span class="p">{</span><span class="k">color</span><span class="o">:</span> <span class="nb">blue</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>上例中，.demo是祖先元素，li是后代元素。该例子所表达的意思是，选择了.demo的所有后代li元素，不管li与.demo之间是子元素、孙元素或者更深的层级关系，li都会被选中。效果为：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-ef.png" alt="" /></p>

<h4>6. 子选择器（Child Selector）(E>F)</h4>

<p>与后代选择器不同，子元素指选择某元素的子元素。例如：E>F，其中E为父元素，F为子元素，该表达式表示选择E元素下的所有子元素F。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个例子表示，选择ul的所有子元素li，效果图如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-chirld.png" alt="" /></p>

<p>如果将上例中的ul改为div则不能选中li元素，因为li不是div的子元素。</p>

<h4>7. 相邻选择器（Adjacent Sibling Selector）(E+F)</h4>

<p>相邻选择器可以选择紧接在另一个元素后的元素，而且他们具有相同的父元素。例如：E+F，E元素和F元素具有相同的父元素，且F元素在的后面。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">li</span> <span class="o">+</span> <span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>上例用来选择li之前有个li的元素，效果图如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css-selector-xl.png" alt="" /></p>

<p>从图中可以看出，第一个li元素没有被选中，因为它的前面没有li元素。</p>

<h4>8. 普通兄弟选择器（General Sibling Selector）(E~F)</h4>

<p>普通兄弟选择器用来选择元素后面所有的兄弟元素，它们可以不相邻，但必须具有相同的父元素。例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.active</span> <span class="o">~</span> <span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>用来选择.active元素后面的所有兄弟元素li，效果如下:</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-tongyong.png" alt="" /></p>

<h4>9. 群组选择器（Group Selector）(selector1,selector2,&hellip;,selectorN)</h4>

<p>群组选择器将具有相同样式的元素放在一起，中间以逗号隔开，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.first</span><span class="o">,</span> <span class="nc">.last</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>用来为.first和.last元素添加一些相同的样式，效果如下:</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-group.png" alt="" /></p>

<h3><strong>二. 属性选择器</strong></h3>

<p>属性选择器用来对带有指定属性的html元素设置样式。同样，我将通过一个实例来总结属性选择器的用法，实例的代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;demo clearfix&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;http://www.xxx.com&quot;</span> <span class="nt">target</span><span class="o">=</span><span class="s2">&quot;_blank&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item first&quot;</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;first&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links active item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;test website&quot;</span> <span class="nt">target</span><span class="o">=</span><span class="s2">&quot;_blank&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;zh&quot;</span><span class="o">&gt;</span><span class="nt">2</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;sites/file/test.html&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;this is a link&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;zh-cn&quot;</span><span class="o">&gt;</span><span class="nt">3</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;sites/file/test.png&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">target</span><span class="o">=</span><span class="s2">&quot;_balnk&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;zh-tw&quot;</span><span class="o">&gt;</span><span class="nt">4</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;sites/file/image.jpg&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;zh-cn&quot;</span><span class="o">&gt;</span><span class="nt">5</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;mailto:xxx@hotmail&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;website link&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;zh&quot;</span><span class="o">&gt;</span><span class="nt">6</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;open the website&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;cn&quot;</span><span class="o">&gt;</span><span class="nt">7</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;close the website&quot;</span> <span class="nt">lang</span><span class="o">=</span><span class="s2">&quot;en-zh&quot;</span><span class="o">&gt;</span><span class="nt">8</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item&quot;</span> <span class="nt">title</span><span class="o">=</span><span class="s2">&quot;http://www.sina.com&quot;</span><span class="o">&gt;</span><span class="nt">9</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;links item last&quot;</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="o">&gt;</span><span class="nt">10</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>在添加一些样式之后，实例的初步现实如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-status.png" alt="" /></p>

<h4>1. E[attr]</h4>

<p>E[attr]用来选择具有某种属性的元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">id</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">blue</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-weight</span><span class="o">:</span><span class="k">bold</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，.demo下所有带id属性的a元素，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr.png" alt="" /></p>

<h4>2. E[attr = &ldquo;value&rdquo;]</h4>

<p>E[attr = &ldquo;value&rdquo;]用来选择具有某种属性，并且属性的值为“value”的元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">id</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">blue</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-weight</span><span class="o">:</span><span class="k">bold</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，.demo下带有id属性，并且id的值为“first”的元素，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr2.png" alt="" /></p>

<h4>3. E[attr ~= &ldquo;value&rdquo;]</h4>

<p>E[attr ~= &ldquo;value&rdquo;]根据属性值中的词列表来进行选择，选择属性值中具有“value”这个词的元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">title</span><span class="o">~=</span><span class="s2">&quot;website&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">orange</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">green</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，.demo下的a元素的title属性中，只有其属性值包含“website”这个词就会被选择，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr4.png" alt="" /></p>

<h4>4. E[attr ^= &ldquo;value&rdquo;]</h4>

<p>E[attr ^= &ldquo;value&rdquo;]选择attr属性值以“value”开头的所有元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">^=</span><span class="s2">&quot;http://&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">orange</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">^=</span><span class="s2">&quot;mailto:&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">orange</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下具有href属性的a元素，并且href属性的值是以<code>http://</code>和<code>mailto:</code>开头，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr5.png" alt="" /></p>

<h4>5. E[attr $= &ldquo;value&rdquo;]</h4>

<p>与E[attr ^= &ldquo;value&rdquo;]相反，E[attr $= &ldquo;value&rdquo;]选择attr属性值以“value”结尾的元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">$=</span><span class="s2">&quot;png&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">orange</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">green</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下具有href属性的a元素，并且属性href的值以“png”结尾，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr6.png" alt="" /></p>

<h4>6. E[attr *= &ldquo;value&rdquo;]</h4>

<p>E[attr *= &ldquo;value&rdquo;]选择attr属性值包含子串“value”的所有元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">title</span><span class="o">*=</span><span class="s2">&quot;site&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">black</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">white</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下具有title属性的a元素，并且title属性值包含子串“site”，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr7.png" alt="" /></p>

<h4>7. E[attr |= &ldquo;value&rdquo;]</h4>

<p>E[attr |= &ldquo;value&rdquo;]选择attr属性值等于“value”或以“value-”开头的所有元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="o">[</span><span class="nt">lang</span><span class="o">|=</span><span class="s2">&quot;zh&quot;</span><span class="o">]</span><span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span><span class="nb">gray</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span><span class="nb">yellow</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下具有lang属性的a元素，并且属性lang的值为“zh”或以“zh-”开头，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-attr8.png" alt="" /></p>

<h3><strong>三. 伪类选择器</strong></h3>

<h4>动态伪类</h4>

<p>动态伪类并不存在与html文档中，只有当用户和网站交互的时候它才能体现出来。动态伪类包含两种：锚点伪类（Anchor Pseudo-Classes）和用户行为伪类（User Action Pseudo-Class）。</p>

<ul>
<li><strong>锚点伪类</strong></li>
</ul>


<p>锚点伪类常用于链接的样式设置，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="nd">:link</span> <span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">gray</span><span class="p">;}</span>
</span><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="nd">:visited</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">yellow</span><span class="p">;}</span>
</span><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="nd">:hover</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">green</span><span class="p">;}</span>
</span><span class='line'><span class="nc">.demo</span> <span class="nt">a</span><span class="nd">:active</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">blue</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，链接没有被访问时前景色为灰色，链接被访问过后前景色为黄色，鼠标悬浮在链接上时前景色为绿色，鼠标点中激活链接那一下前景色为蓝色。
注意这四个锚点伪类的设置顺序，如果顺序不对会使我们设置的样式不生效。</p>

<ul>
<li><strong>用户行为伪类</strong></li>
</ul>


<p>用户行为伪类用于设置用户和页面交互时的一些样式设置，锚点伪类中的:hover和:active同时又是用户行为伪类。</p>

<ul>
<li>:hover，用于设置当用户把鼠标移动到元素上面时的效果；</li>
<li>:active，用于设置用户点击元素时的效果（动作发生在点击的当时，松开鼠标此动作就会消失）；</li>
<li>:focus，用户设置某元素成为焦点时的样式（例如选择一个输入框）。</li>
</ul>


<h4>UI状态伪类</h4>

<p>常见的UI状态伪类有：</p>

<ul>
<li>:enabled</li>
<li>:disabled</li>
<li>:checked</li>
</ul>


<p>这些伪类主要针对html文档中的Form元素操作，最常见的有"type=&lsquo;text&rsquo;&ldquo;有enabled和disabled两种状态，前者表示可写，后者表示不可写。那么使用UI状态伪类就可以为同一个元素的不同状态设置不同的样式，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">]</span><span class="nd">:disabled</span> <span class="p">{</span><span class="k">border</span><span class="o">:</span><span class="m">1px</span> <span class="k">solid</span> <span class="m">#999</span><span class="p">;</span><span class="k">background-color</span><span class="o">:</span> <span class="m">#fefefe</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，为页面中禁用的文本框设置一个样式。</p>

<h4>:nth选择器</h4>

<p>:nth选择器是伪类选择器中最复杂的一个，我将通过一个实例总结其用法，实例的代码为：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;demo clearfix&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">ul</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;clearfix&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;first odd&quot;</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;even&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">2</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;odd&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">3</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;even&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">4</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;odd&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">5</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;even&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">6</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;odd&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">7</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;even&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">8</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;odd&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">9</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">li</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;even last&quot;</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="o">&gt;&lt;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="nt">10</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>在添加一些样式之后，实例的初步现实如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-status.png" alt="" /></p>

<h5>1. :first-child()</h5>

<p>:first-child()用来选择某个元素的第一个元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:first-child</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">dotted</span> <span class="nb">blue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo的第一个li子元素，并为其加上一些样式，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth1.png" alt="" /></p>

<h5>2. :last-child()</h5>

<p>顾名思义，:last-child()用来选择某个元素的最后一个子元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:last-child</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">2px</span> <span class="k">dotted</span> <span class="nb">blue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo的最后一个li子元素，并为其加上一些样式，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth2.png" alt="" /></p>

<h5>3. :nth-child()</h5>

<p>:nth-child()可以选择一个元素的某个子元素，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span> <span class="p">{</span><span class="k">background</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示.demo的第三个li子元素，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth3.png" alt="" /></p>

<p>也可以选择某些子元素，有如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">n</span><span class="o">)</span> <span class="p">{</span><span class="k">background</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下所有的子元素，这里的n是一个从0开始计数的变量，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth4.png" alt="" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">-n</span><span class="o">+</span><span class="nt">5</span><span class="o">)</span> <span class="p">{</span><span class="k">background</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>因为n是从0开始计数的，所以以上代码会选择.demo的前5个li子元素。</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth8.png" alt="" /></p>

<p>:nth-child()的用法还有很多，具体总结如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">length</span><span class="o">);</span><span class="c">/*参数是具体数字*/</span>
</span><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">n</span><span class="o">);</span><span class="c">/*参数是n,n从0开始计算*/</span>
</span><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">n</span><span class="o">*</span><span class="nt">length</span><span class="o">)</span><span class="c">/*n的倍数选择，n从0开始算*/</span>
</span><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">n</span><span class="o">+</span><span class="nt">length</span><span class="o">);</span><span class="c">/*选择大于length后面的元素*/</span>
</span><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">-n</span><span class="o">+</span><span class="nt">length</span><span class="o">)</span><span class="c">/*选择小于length前面的元素*/</span>
</span><span class='line'><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">n</span><span class="o">*</span><span class="nt">length</span><span class="o">+</span><span class="nt">1</span><span class="o">);</span><span class="c">/*表示隔几选一*/</span>
</span></code></pre></td></tr></table></div></figure>


<p>对于:nth-child()有个很好玩，也特别容易出错的例子：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">a</span><span class="o">&gt;</span><span class="nt">link</span><span class="o">&lt;/</span><span class="nt">a</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="nt">some</span> <span class="nt">text</span><span class="o">&lt;/</span><span class="nt">p</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">apple</span> <span class="nt">1</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>  <span class="c">/*这一行会被选出*/</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">apple</span> <span class="nt">2</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">apple</span> <span class="nt">3</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">apple</span> <span class="nt">4</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">apple</span> <span class="nt">5</span><span class="o">&lt;/</span><span class="nt">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>对于这段代码，使用CSS选择器：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">ul</span> <span class="nt">li</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>会选中apple 1那一行。这是因为nth-child()并不是从前面的选择符筛选后的结果中选择第n个。它的定义是，选择在其parent下的第n个子元素。而这个“第n个”的计算，是把它parent下所有的子元素都包括在内的。</p>

<h5>4. :nth-last-child()</h5>

<p>:nth-last-child()与:nth-child()相似，只是它是由最后一个开始元素开始计数的，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.demo</span> <span class="nt">li</span><span class="nd">:nth-last-child</span><span class="o">(</span><span class="nt">4</span><span class="o">)</span> <span class="p">{</span><span class="k">background</span><span class="o">:</span> <span class="nb">lime</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<p>表示，选择.demo下的倒数第四个li元素，效果如下：</p>

<p><img src="http://www.w3cplus.com/sites/default/files/css3-selector-nth10.png" alt="" /></p>

<h5>5. :empty</h5>

<p>:empty用于设置当元素没有任何内容时的样式。例如，页面中有一个box是用来输出错误信息的，那么当没有错误信息时，我们就可以通过:empty使之不显示。</p>

<h5>6. other nth selector</h5>

<p>:nth选择器还有很多与:nth-child()相类似的其他用法，这里只将它们列举出来，不再一一赘述。</p>

<ul>
<li>:first-of-type</li>
<li>:last-of-type</li>
<li>:nth-of-type</li>
<li>:nth-last-type</li>
<li>:only-child</li>
<li>:only-of-type</li>
</ul>


<h2><strong>伪元素</strong></h2>

<p>所谓伪元素，可以理解为浏览器为某元素附加的元素。常用的伪元素有：</p>

<ul>
<li>::first-line</li>
<li>::first-letter</li>
<li>::before</li>
<li>::after</li>
</ul>


<p>::first-line和::first-letter可以用于方便的为文本添加一些特殊的样式，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">div</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="nt">The</span> <span class="nt">Coming</span> <span class="nt">of</span> <span class="nt">Wisdom</span> <span class="nt">with</span> <span class="nt">Time</span><span class="o">;</span> <span class="o">&lt;</span><span class="nt">br</span><span class="o">&gt;</span>
</span><span class='line'>         <span class="nt">Though</span> <span class="nt">leaves</span> <span class="nt">are</span> <span class="nt">many</span><span class="o">,</span> <span class="nt">the</span> <span class="nt">root</span> <span class="nt">is</span> <span class="nt">one</span><span class="o">;</span> <span class="o">&lt;</span><span class="nt">br</span><span class="o">&gt;</span>
</span><span class='line'>         <span class="nt">Through</span> <span class="nt">all</span> <span class="nt">the</span> <span class="nt">lying</span> <span class="nt">days</span> <span class="nt">of</span> <span class="nt">my</span> <span class="nt">youth</span><span class="o">;</span> <span class="o">&lt;</span><span class="nt">br</span><span class="o">&gt;</span>
</span><span class='line'>         <span class="nt">I</span> <span class="nt">swayed</span> <span class="nt">my</span> <span class="nt">leaves</span> <span class="nt">and</span> <span class="nt">flowers</span> <span class="nt">in</span> <span class="nt">the</span> <span class="nt">sun</span><span class="o">;</span> <span class="o">&lt;</span><span class="nt">br</span><span class="o">&gt;</span>
</span><span class='line'>         <span class="nt">Now</span> <span class="nt">I</span> <span class="nt">may</span> <span class="nt">wither</span> <span class="nt">into</span> <span class="nt">the</span> <span class="nt">truth</span><span class="o">.</span>
</span><span class='line'>      <span class="o">&lt;/</span><span class="nt">p</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以通过伪元素为其添加一些特殊样式：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">p</span><span class="o">:</span><span class="nd">:first-line</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-style</span><span class="o">:</span> <span class="k">italic</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nt">p</span><span class="o">:</span><span class="nd">:first-letter</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">70px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">float</span><span class="o">:</span><span class="k">left</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin-right</span><span class="o">:</span><span class="m">3px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>效果为：</p>

<p><img src="/images/img_for_css_vocabulary/firstline.png" alt="" /></p>

<p>同理，::before和::after用于向元素的前面和后面添加一些特殊样式，它们需要与content属性一起使用：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.css-class</span><span class="nd">:before</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.css-class</span><span class="nd">:after</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>通过伪元素，可以方便的实现一些使用其他方法需要花费很大力气的工作。可以通过<strong><a href="http://icodeit.org/2013/05/before-and-after-selector-in-css/">这里</a></strong>了解它的用法和一些实例.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/30/model-in-color/">[彩色建模【译】](http://www.step-10.com/SoftwareDesign/ModellingInColour/index.html)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/07/chi-xu-ji-cheng-zhi-wo-jian-si/">持续集成之我见（四）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/29/chi-xu-ji-cheng-san/">持续集成之我见（三）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/28/chi-xu-ji-cheng-er/">持续集成之我见（二）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/27/chi-xu-ji-cheng/">持续集成之我见（一）</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
